

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration Reference &mdash; Citus 5.2.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Citus 5.2.1 documentation" href="../index.html"/>
        <link rel="next" title="Append Distribution" href="append.html"/>
        <link rel="prev" title="Metadata Tables Reference" href="metadata_tables.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>
  <script>
   window.intercomSettings = {
     app_id: "jfost7ih",
   };
  </script>
  <script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/jfost7ih';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>
</head>

<body class="wy-body-for-nav" role="document">
  <div class="header">
  <div class="section-wrap"> 
              <div class="utility-nav">
              </div>
                      <a href="https://www.citusdata.com" title="Citus Data" rel="home" class="logo">
            <img src="../_static/images/citus-logo.png" alt="Citus Data">
          </a>
              <div class="clear"></div>
  </div>
  </div>
  <div class="nav-wrap menu">
    <div class="section-wrap">
      <ul>
        <li><a href="https://www.citusdata.com/product/citus">Product</a></li>
        <li><a href="https://www.citusdata.com/solutions/applications">Solutions</a></li>
        <li><a href="https://www.citusdata.com/blog">Blog</a></li>
        <li><a href="#">Documentation</a></li>
      </ul>
    </div>
  </div>

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Citus
          

          
          </a>

          
            
            
              <div class="version">
                5.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">About Citus</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aboutcitus/what_is_citus.html">What is Citus?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutcitus/introduction_to_citus.html">Architecture</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tut-hash-distribution.html">Hash-Distributed Data</a></li>
</ul>
<p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/development.html">Single-Machine Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/production.html">Multi-Machine Cluster</a></li>
</ul>
<p class="caption"><span class="caption-text">Distributed Tables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dist_tables/concepts.html">Picking a Distribution Column</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dist_tables/ddl.html">Creating Distributed Tables (DDL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dist_tables/dml.html">Ingesting, Modifying Data (DML)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dist_tables/querying.html">Querying Distributed Tables (SQL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dist_tables/extensions.html">PostgreSQL extensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Performance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../performance/query_processing.html">Citus Query Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/scaling_data_ingestion.html">Scaling Out Data Ingestion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/performance_tuning.html">Query Performance Tuning</a></li>
</ul>
<p class="caption"><span class="caption-text">Cloud</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cloud/index.html">Citus Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud/support.html">Support and Billing</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tech_soln/real_time_dashboards.html">Real Time Dashboards</a></li>
</ul>
<p class="caption"><span class="caption-text">Administration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin_guide/cluster_management.html">Cluster Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin_guide/upgrading_citus.html">Upgrading Citus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin_guide/transitioning_from_postgresql_to_citus.html">Transitioning From PostgreSQL to Citus</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="citus_sql_reference.html">Citus SQL Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="sql_workarounds.html">SQL Workarounds</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_defined_functions.html">User Defined Functions Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata_tables.html">Metadata Tables Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#node-configuration">Node configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pg-worker-list-conf">pg_worker_list.conf</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-max-worker-nodes-tracked-integer">citus.max_worker_nodes_tracked (integer)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-loading">Data Loading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#citus-multi-shard-commit-protocol-enum">citus.multi_shard_commit_protocol (enum)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-shard-replication-factor-integer">citus.shard_replication_factor (integer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-shard-max-size-integer">citus.shard_max_size (integer)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#planner-configuration">Planner Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#citus-large-table-shard-count-integer">citus.large_table_shard_count (integer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-limit-clause-row-fetch-count-integer">citus.limit_clause_row_fetch_count (integer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-count-distinct-error-rate-floating-point">citus.count_distinct_error_rate (floating point)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-task-assignment-policy-enum">citus.task_assignment_policy (enum)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#intermediate-data-transfer-format">Intermediate Data Transfer Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#citus-binary-worker-copy-format-boolean">citus.binary_worker_copy_format (boolean)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-binary-master-copy-format-boolean">citus.binary_master_copy_format (boolean)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ddl">DDL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#citus-enable-ddl-propagation-boolean">citus.enable_ddl_propagation (boolean)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#executor-configuration">Executor Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#citus-all-modifications-commutative">citus.all_modifications_commutative</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-remote-task-check-interval-integer">citus.remote_task_check_interval (integer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#citus-task-executor-type-enum">citus.task_executor_type (enum)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#real-time-executor-configuration">Real-time executor configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#max-connections-integer">max_connections (integer)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#max-files-per-process-integer">max_files_per_process (integer)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#task-tracker-executor-configuration">Task tracker executor configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#citus-task-tracker-delay-integer">citus.task_tracker_delay (integer)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#citus-max-tracked-tasks-per-node-integer">citus.max_tracked_tasks_per_node (integer)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#citus-max-assign-task-batch-size-integer">citus.max_assign_task_batch_size (integer)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#citus-max-running-tasks-per-node-integer">citus.max_running_tasks_per_node (integer)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#citus-partition-buffer-size-integer">citus.partition_buffer_size (integer)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#explain-output">Explain output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#citus-explain-all-tasks-boolean">citus.explain_all_tasks (boolean)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="append.html">Append Distribution</a></li>
</ul>
<p class="caption"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <a href="../index.html">Citus</a>
      <ul>
        <li><a href="/product/citus">Product</a></li>
        <li><a href="/solutions/applications">Solutions</a></li>
        <li><a href="/blog">Blog</a></li>
      </ul>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Configuration Reference</li>
    <li class="wy-breadcrumbs-aside">
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuration-reference">
<span id="configuration"></span><h1>Configuration Reference<a class="headerlink" href="#configuration-reference" title="Permalink to this headline">¶</a></h1>
<p>There are various configuration parameters that affect the behaviour of Citus. These include both standard PostgreSQL parameters and Citus specific parameters. To learn more about PostgreSQL configuration parameters, you can visit the <a class="reference external" href="http://www.postgresql.org/docs/9.5/static/runtime-config.html">run time configuration</a> section of PostgreSQL documentation.</p>
<p>The rest of this reference aims at discussing Citus specific configuration parameters. These parameters can be set similar to PostgreSQL parameters by modifying postgresql.conf or <a class="reference external" href="http://www.postgresql.org/docs/9.5/static/config-setting.html">by using the SET command</a>.</p>
<div class="section" id="node-configuration">
<h2>Node configuration<a class="headerlink" href="#node-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pg-worker-list-conf">
<h3>pg_worker_list.conf<a class="headerlink" href="#pg-worker-list-conf" title="Permalink to this headline">¶</a></h3>
<p>The Citus master needs to have information about the worker nodes in the cluster so that it can communicate with them. This information is stored in the pg_worker_list.conf file in the data directory on the master. To add this information, you need to append the DNS names and port numbers of the workers to this file. You can then call pg_reload_conf() or restart the master to allow it to refresh its worker membership list.</p>
<p>The example below adds worker-101 and worker-102 as worker nodes in the pg_worker_list.conf file on the master.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>vi $PGDATA/pg_worker_list.conf
# HOSTNAME      [PORT]  [RACK]
worker-101
worker-102
</pre></div>
</div>
</div>
<div class="section" id="citus-max-worker-nodes-tracked-integer">
<h3>citus.max_worker_nodes_tracked (integer)<a class="headerlink" href="#citus-max-worker-nodes-tracked-integer" title="Permalink to this headline">¶</a></h3>
<p>Citus tracks worker nodes&#8217; locations and their membership in a shared hash table on the master node. This configuration value limits the size of the hash table, and consequently the number of worker nodes that can be tracked. The default for this setting is 2048. This parameter can only be set at server start and is effective on the master node.</p>
</div>
</div>
<div class="section" id="data-loading">
<h2>Data Loading<a class="headerlink" href="#data-loading" title="Permalink to this headline">¶</a></h2>
<div class="section" id="citus-multi-shard-commit-protocol-enum">
<h3>citus.multi_shard_commit_protocol (enum)<a class="headerlink" href="#citus-multi-shard-commit-protocol-enum" title="Permalink to this headline">¶</a></h3>
<p>Sets the commit protocol to use when performing COPY on a hash distributed table. On each individual shard placement, the COPY is performed in a transaction block to ensure that no data is ingested if an error occurs during the COPY. However, there is a particular failure case in which the COPY succeeds on all placements, but a (hardware) failure occurs before all transactions commit. This parameter can be used to prevent data loss in that case by choosing between the following commit protocols:</p>
<ul class="simple">
<li><strong>1pc:</strong> The transactions in which which COPY is performed on the shard placements is committed in a single round. Data may be lost if a commit fails after COPY succeeds on all placements (rare). This is the default protocol.</li>
<li><strong>2pc:</strong> The transactions in which COPY is performed on the shard placements are first prepared using PostgreSQL&#8217;s <a class="reference external" href="http://www.postgresql.org/docs/current/static/sql-prepare-transaction.html">two-phase commit</a> and then committed. Failed commits can be manually recovered or aborted using COMMIT PREPARED or ROLLBACK PREPARED, respectively. When using 2pc, <a class="reference external" href="http://www.postgresql.org/docs/current/static/runtime-config-resource.html">max_prepared_transactions</a> should be increased on all the workers, typically to the same value as max_connections.</li>
</ul>
</div>
<div class="section" id="citus-shard-replication-factor-integer">
<h3>citus.shard_replication_factor (integer)<a class="headerlink" href="#citus-shard-replication-factor-integer" title="Permalink to this headline">¶</a></h3>
<p>Sets the replication factor for shards i.e. the number of nodes on which shards will be placed and defaults to 2. This parameter can be set at run-time and is effective on the master.
The ideal value for this parameter depends on the size of the cluster and rate of node failure. For example, you may want to increase this replication factor if you run large clusters and observe node failures on a more frequent basis.</p>
</div>
<div class="section" id="citus-shard-max-size-integer">
<h3>citus.shard_max_size (integer)<a class="headerlink" href="#citus-shard-max-size-integer" title="Permalink to this headline">¶</a></h3>
<p>Sets the maximum size to which a shard will grow before it gets split and defaults to 1GB. When the source file&#8217;s size (which is used for staging) for one shard exceeds this configuration value, the database ensures that a new shard gets created. This parameter can be set at run-time and is effective on the master.</p>
</div>
</div>
<div class="section" id="planner-configuration">
<h2>Planner Configuration<a class="headerlink" href="#planner-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="citus-large-table-shard-count-integer">
<h3>citus.large_table_shard_count (integer)<a class="headerlink" href="#citus-large-table-shard-count-integer" title="Permalink to this headline">¶</a></h3>
<p>Sets the shard count threshold over which a table is considered large and defaults to 4. This criteria is then used in picking a table join order during distributed query planning. This value can be set at run-time and is effective on the master.</p>
</div>
<div class="section" id="citus-limit-clause-row-fetch-count-integer">
<h3>citus.limit_clause_row_fetch_count (integer)<a class="headerlink" href="#citus-limit-clause-row-fetch-count-integer" title="Permalink to this headline">¶</a></h3>
<p>Sets the number of rows to fetch per task for limit clause optimization. In some cases, select queries with limit clauses may need to fetch all rows from each task to generate results. In those cases, and where an approximation would produce meaningful results, this configuration value sets the number of rows to fetch from each shard. Limit approximations are disabled by default and this parameter is set to -1. This value can be set at run-time and is effective on the master.</p>
</div>
<div class="section" id="citus-count-distinct-error-rate-floating-point">
<h3>citus.count_distinct_error_rate (floating point)<a class="headerlink" href="#citus-count-distinct-error-rate-floating-point" title="Permalink to this headline">¶</a></h3>
<p>Citus can calculate count(distinct) approximates using the postgresql-hll extension. This configuration entry sets the desired error rate when calculating count(distinct). 0.0, which is the default, disables approximations for count(distinct); and 1.0 provides no guarantees about the accuracy of results. We recommend setting this parameter to 0.005 for best results. This value can be set at run-time and is effective on the master.</p>
</div>
<div class="section" id="citus-task-assignment-policy-enum">
<h3>citus.task_assignment_policy (enum)<a class="headerlink" href="#citus-task-assignment-policy-enum" title="Permalink to this headline">¶</a></h3>
<p>Sets the policy to use when assigning tasks to workers. The master assigns tasks to workers based on shard locations. This configuration value specifies the policy to use when making these assignments. Currently, there are three possible task assignment policies which can be used.</p>
<ul class="simple">
<li><strong>greedy:</strong> The greedy policy is the default and aims to evenly distribute tasks across workers.</li>
<li><strong>round-robin:</strong> The round-robin policy assigns tasks to workers in a round-robin fashion alternating between different replicas. This enables much better cluster utilization when the shard count for a table is low compared to the number of workers.</li>
<li><strong>first-replica:</strong> The first-replica policy assigns tasks on the basis of the insertion order of placements (replicas) for the shards. In other words, the fragment query for a shard is simply assigned to the worker which has the first replica of that shard. This method allows you to have strong guarantees about which shards will be used on which nodes (i.e. stronger memory residency guarantees).</li>
</ul>
<p>This parameter can be set at run-time and is effective on the master.</p>
</div>
</div>
<div class="section" id="intermediate-data-transfer-format">
<h2>Intermediate Data Transfer Format<a class="headerlink" href="#intermediate-data-transfer-format" title="Permalink to this headline">¶</a></h2>
<div class="section" id="citus-binary-worker-copy-format-boolean">
<h3>citus.binary_worker_copy_format (boolean)<a class="headerlink" href="#citus-binary-worker-copy-format-boolean" title="Permalink to this headline">¶</a></h3>
<p>Use the binary copy format to transfer intermediate data between workers. During large table joins, Citus may have to dynamically repartition and shuffle data between different workers. By default, this data is transferred in text format. Enabling this parameter instructs the database to use PostgreSQL’s binary serialization format to transfer this data. This parameter is effective on the workers and needs to be changed in the postgresql.conf file. After editing the config file, users can send a SIGHUP signal or restart the server for this change to take effect.</p>
</div>
<div class="section" id="citus-binary-master-copy-format-boolean">
<h3>citus.binary_master_copy_format (boolean)<a class="headerlink" href="#citus-binary-master-copy-format-boolean" title="Permalink to this headline">¶</a></h3>
<p>Use the binary copy format to transfer data between master and the workers. When running distributed queries, the workers transfer their intermediate results to the master for final aggregation. By default, this data is transferred in text format. Enabling this parameter instructs the database to use PostgreSQL’s binary serialization format to transfer this data. This parameter can be set at runtime and is effective on the master.</p>
</div>
</div>
<div class="section" id="ddl">
<h2>DDL<a class="headerlink" href="#ddl" title="Permalink to this headline">¶</a></h2>
<div class="section" id="citus-enable-ddl-propagation-boolean">
<h3>citus.enable_ddl_propagation (boolean)<a class="headerlink" href="#citus-enable-ddl-propagation-boolean" title="Permalink to this headline">¶</a></h3>
<p>Specifies whether to automatically propagate DDL changes from the master to all workers. The default value is true. Because some schema changes require an access exclusive lock on tables and because the automatic propagation applies to all workers sequentially it can make a Citus cluter temporarily less responsive. You may choose to disable this setting and propagate changes manually.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently CREATE INDEX and ALTER TABLE are the only DDL changes that Citus propagates automatically.</p>
</div>
</div>
</div>
<div class="section" id="executor-configuration">
<h2>Executor Configuration<a class="headerlink" href="#executor-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="citus-all-modifications-commutative">
<h3>citus.all_modifications_commutative<a class="headerlink" href="#citus-all-modifications-commutative" title="Permalink to this headline">¶</a></h3>
<p>Citus enforces commutativity rules and acquires appropriate locks for modify operations in order to guarantee correctness of behavior. For example, it assumes that an INSERT statement commutes with another INSERT statement, but not with an UPDATE or DELETE statement. Similarly, it assumes that an UPDATE or DELETE statement does not commute with another UPDATE or DELETE statement. This means that UPDATEs and DELETEs require Citus to acquire stronger locks.</p>
<p>If you have UPDATE statements that are commutative with your INSERTs or other UPDATEs, then you can relax these commutativity assumptions by setting this parameter to true. When this parameter is set to true, all commands are considered commutative and claim a shared lock, which can improve overall throughput. This parameter can be set at runtime and is effective on the master.</p>
</div>
<div class="section" id="citus-remote-task-check-interval-integer">
<h3>citus.remote_task_check_interval (integer)<a class="headerlink" href="#citus-remote-task-check-interval-integer" title="Permalink to this headline">¶</a></h3>
<p>Sets the frequency at which Citus checks for statuses of jobs managed by the task tracker executor. It defaults to 10ms. The master assigns tasks to workers, and then regularly checks with them about each task&#8217;s progress. This configuration value sets the time interval between two consequent checks. This parameter is effective on the master and can be set at runtime.</p>
</div>
<div class="section" id="citus-task-executor-type-enum">
<h3>citus.task_executor_type (enum)<a class="headerlink" href="#citus-task-executor-type-enum" title="Permalink to this headline">¶</a></h3>
<p>Citus has two executor types for running distributed SELECT queries. The desired executor can be selected by setting this configuration parameter. The accepted values for this parameter are:</p>
<ul class="simple">
<li><strong>real-time:</strong> The real-time executor is the default executor and is optimal when you require fast responses to queries that involve aggregations and colocated joins spanning across multiple shards.</li>
<li><strong>task-tracker:</strong> The task-tracker executor is well suited for long running, complex queries which require shuffling of data across worker nodes and efficient resource management.</li>
</ul>
<p>This parameter can be set at run-time and is effective on the master. For more details about the executors, you can visit the <a class="reference internal" href="../performance/query_processing.html#distributed-query-executor"><span class="std std-ref">Distributed Query Executor</span></a> section of our documentation.</p>
</div>
<div class="section" id="real-time-executor-configuration">
<h3>Real-time executor configuration<a class="headerlink" href="#real-time-executor-configuration" title="Permalink to this headline">¶</a></h3>
<p>The Citus query planner first prunes away the shards unrelated to a query and then hands the plan over to the real-time executor. For executing the plan, the real-time executor opens one connection and uses two file descriptors per unpruned shard. If the query hits a high number of shards, then the executor may need to open more connections than max_connections or use more file descriptors than max_files_per_process.</p>
<p>In such cases, the real-time executor will begin throttling tasks to prevent overwhelming the worker resources. Since this throttling can reduce query performance, the real-time executor will issue an appropriate warning suggesting that increasing these parameters might be required to maintain the desired performance. These parameters are discussed in brief below.</p>
<div class="section" id="max-connections-integer">
<h4>max_connections (integer)<a class="headerlink" href="#max-connections-integer" title="Permalink to this headline">¶</a></h4>
<p>Sets the maximum number of concurrent connections to the database server. The default is typically 100 connections, but might be less if your kernel settings will not support it (as determined during initdb). The real time executor maintains an open connection for each shard to which it sends queries. Increasing this configuration parameter will allow the executor to have more concurrent connections and hence handle more shards in parallel. This parameter has to be changed on the workers as well as the master, and can be done only during server start.</p>
</div>
<div class="section" id="max-files-per-process-integer">
<h4>max_files_per_process (integer)<a class="headerlink" href="#max-files-per-process-integer" title="Permalink to this headline">¶</a></h4>
<p>Sets the maximum number of simultaneously open files for each server process and defaults to 1000. The real-time executor requires two file descriptors for each shard it sends queries to. Increasing this configuration parameter will allow the executor to have more open file descriptors, and hence handle more shards in parallel. This change has to be made on the workers as well as the master, and can be done only during server start.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Along with max_files_per_process, one may also have to increase the kernel limit for open file descriptors per process using the ulimit command.</p>
</div>
</div>
</div>
<div class="section" id="task-tracker-executor-configuration">
<h3>Task tracker executor configuration<a class="headerlink" href="#task-tracker-executor-configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="citus-task-tracker-delay-integer">
<h4>citus.task_tracker_delay (integer)<a class="headerlink" href="#citus-task-tracker-delay-integer" title="Permalink to this headline">¶</a></h4>
<p>This sets the task tracker sleep time between task management rounds and defaults to 200ms. The task tracker process wakes up regularly, walks over all tasks assigned to it, and schedules and executes these tasks. Then, the task tracker sleeps for a time period before walking over these tasks again. This configuration value determines the length of that sleeping period. This parameter is effective on the workers and needs to be changed in the postgresql.conf file. After editing the config file, users can send a SIGHUP signal or restart the server for the change to take effect.</p>
<p>This parameter can be decreased to trim the delay caused due to the task tracker executor by reducing the time gap between the management rounds. This is useful in cases when the shard queries are very short and hence update their status very regularly.</p>
</div>
<div class="section" id="citus-max-tracked-tasks-per-node-integer">
<h4>citus.max_tracked_tasks_per_node (integer)<a class="headerlink" href="#citus-max-tracked-tasks-per-node-integer" title="Permalink to this headline">¶</a></h4>
<p>Sets the maximum number of tracked tasks per node and defaults to 1024. This configuration value limits the size of the hash table which is used for tracking assigned tasks, and therefore the maximum number of tasks that can be tracked at any given time. This value can be set only at server start time and is effective on the workers.</p>
<p>This parameter would need to be increased if you want each worker node to be able to track more tasks. If this value is lower than what is required, Citus errors out on the worker node saying it is out of shared memory and also gives a hint indicating that increasing this parameter may help.</p>
</div>
<div class="section" id="citus-max-assign-task-batch-size-integer">
<h4>citus.max_assign_task_batch_size (integer)<a class="headerlink" href="#citus-max-assign-task-batch-size-integer" title="Permalink to this headline">¶</a></h4>
<p>The task tracker executor on the master synchronously assigns tasks in batches to the deamon on the workers. This parameter sets the maximum number of tasks to assign in a single batch. Choosing a larger batch size allows for faster task assignment. However, if the number of workers is large, then it may take longer for all workers to get tasks. This parameter can be set at runtime and is effective on the master.</p>
</div>
<div class="section" id="citus-max-running-tasks-per-node-integer">
<h4>citus.max_running_tasks_per_node (integer)<a class="headerlink" href="#citus-max-running-tasks-per-node-integer" title="Permalink to this headline">¶</a></h4>
<p>The task tracker process schedules and executes the tasks assigned to it as appropriate. This configuration value sets the maximum number of tasks to execute concurrently on one node at any given time and defaults to 8. This parameter is effective on the worker nodes and needs to be changed in the postgresql.conf file. After editing the config file, users can send a SIGHUP signal or restart the server for the change to take effect.</p>
<p>This configuration entry ensures that you don&#8217;t have many tasks hitting disk at the same time and helps in avoiding disk I/O contention. If your queries are served from memory or SSDs, you can increase max_running_tasks_per_node without much concern.</p>
</div>
<div class="section" id="citus-partition-buffer-size-integer">
<h4>citus.partition_buffer_size (integer)<a class="headerlink" href="#citus-partition-buffer-size-integer" title="Permalink to this headline">¶</a></h4>
<p>Sets the buffer size to use for partition operations and defaults to 8MB. Citus allows for table data to be re-partitioned into multiple files when two large tables are being joined. After this partition buffer fills up, the repartitioned data is flushed into files on disk. This configuration entry can be set at run-time and is effective on the workers.</p>
</div>
</div>
<div class="section" id="explain-output">
<h3>Explain output<a class="headerlink" href="#explain-output" title="Permalink to this headline">¶</a></h3>
<div class="section" id="citus-explain-all-tasks-boolean">
<h4>citus.explain_all_tasks (boolean)<a class="headerlink" href="#citus-explain-all-tasks-boolean" title="Permalink to this headline">¶</a></h4>
<p>By default, Citus shows the output of a single, arbitrary task when running <a class="reference external" href="http://www.postgresql.org/docs/current/static/sql-explain.html">EXPLAIN</a> on a distributed query. In most cases, the explain output will be similar across tasks. Occassionally, some of the tasks will be planned differently or have much higher execution times. In those cases, it can be useful to enable this parameter, after which the EXPLAIN output will include all tasks. This may cause the EXPLAIN to take longer.</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="append.html" class="btn btn-neutral float-right" title="Append Distribution" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="metadata_tables.html" class="btn btn-neutral" title="Metadata Tables Reference" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Citus Data.

    </p>
  </div> 

</footer>

          <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32858865-1', 'auto');
  ga('send', 'pageview');

</script>
<script>
/**
* Function that tracks a click on an outbound link in Analytics.
* This function takes a valid URL string as an argument, and uses that URL string
* as the event label. Setting the transport method to 'beacon' lets the hit be sent
* using 'navigator.sendBeacon' in browser that support it.
*/
var trackOutboundLink = function(url) {
   ga('send', 'event', 'outbound', 'click', url, {
     'transport': 'beacon',
     'hitCallback': function(){document.location = url;}
   });
}
</script>

        </div>
      </div>

    </section>

  </div>
  
<h3>Versions</h3>
<ul>
    <li><a href="../v5.2/reference/configuration.html">v5.2</a></li>
    <li><a href="../v5.1/reference/configuration.html">v5.1</a></li>
    <li><a href="../v5.0/reference/configuration.html">v5.0</a></li>
</ul>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'5.2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>